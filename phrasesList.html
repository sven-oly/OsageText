<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>

  <title>Osage Phrase Database</title>

  <link rel="stylesheet" href="/css/blueprint/screen.css" type="text/css" media="screen">
  <link rel="stylesheet" href="/css/blueprint/print.css" type="text/css" media="print"> 
  <!--[if lt IE 8]>
    <link rel="stylesheet" href="/css/blueprint/ie.css" type="text/css" media="screen, projection">
  <![endif]-->

  <link rel="stylesheet" type="text/css" href="/css/fonts.css">

  <style>
   .default {
     font-family: "Courier New";
	 font-size: 18px;
   }
   .size18 {
	 font-size: 18px;
   }
  </style>

  <script src="/js/utils.js"></script>
  <script src="/js/osageConverter.js"></script>
  <script src="/js/osage_utils.js"></script>

  <script type="text/javascript" >
  function hilightUnconverted() {
    var table=document.getElementById("dbTable");
    var r=1;
    while(row=table.rows[r++]) {
      var c=0;
      var oldOsageText = row.cells[2].innerText;
      var oldUnicodeText = row.cells[3].innerText;
      var uText = oldOsageToUnicode(oldOsageText,
              false, true, false);
      if (oldOsageText !="" && oldUnicodeText != uText) {
        // Only if there is old text to be converted.
        row.cells[3].style.backgroundColor = "Orange";
      }
    }
  }

  function init(hilight) {
    if (hilight) {
      hilightUnconverted();
    }
  }
  </script>
  </head>

  <body onload="init(false)">
  <div class="container">
    <h2>Data from database</h2>
    <div class="span-6 default">
    {{entries|length}} entries returned 
    {% if filter %}
    <br />
    Status = "{{filter}}"
    {% endif %}
    </div>

    <div class="span-14 default ">
    <form action="/words/getPhrases/" id="set_status">

      <input type="radio" name="filterStatus" value="" checked> All phrases
      <input type="radio" name="filterStatus" value="Unknown"> Unknown 
      <input type="radio" name="filterStatus" value="Verified"> Verified
      <br />
      <input type="radio" name="filterStatus" value="Incorrect"> Incorrect
      <input type="radio" name="filterStatus" value="Font"> Font
      <input type="radio" name="filterStatus" value="Other"> Other
      <br />
      Databases:
        {% for db in dbNameListChecked %}
          <input type="checkbox" name="databases" value="{{db.dbName}}"
          {% if db.checked %}
           checked
          {% endif %}
          />{{db.dbName}}
        {% endfor %}
        <input type="checkbox" name="databases" value="*All*"
          {% if selectAllDB %}
           checked
          {% endif %}
          >All<br />
      </select>
       <input type="submit" value="Select">
   </form>
           
    </div>
    <div class="span-4 last">
  
    {% if user_nickname %}
    <h4>Welcome {{user_nickname}}
      {% if user_logout %}
        <a href={{user_logout}}>Logout</a>
      {% endif %}
    {% else %}
      {% if user_login_url %}
        <a href={{user_login_url}}>Log in</a>
      {% endif %}
    {% endif %}
    </div>
  </div> <!-- container -->
  <div class="container">
    
    <div class="span-20 last">
    <table id="dbTable">
      <br />

      
    <!-- Try popup for the sound display -->
    <div class="popup" onclick="popupFunction()" style:"visibility:none">
      show audio + text
      <audio controls="controls">
        <source src="" type="">
          Your browser does not support this type of sound file.
      </audio>

    </div>


      <tr class="default">
        <th>Index</th>
        <th>Voice</th>
        <th>Unicode</th>
        <th>English</th>
        <th>Old Osage</th>
        <th>Comment</th>
        <th>Status</th>
        <th>DB</th>
	  </tr>
      {% for entry in entries %}
      <tr class="default">
        <td><a href="/words/?index={{entry.index}}&dbName={{entry.dbName}}" target=_blank>{{entry.index}}</a></td>
        <td>{%if entry.soundMaleLink%}<a href="{{entry.soundMaleLink}}">M</a>{%endif%}
          {% if entry.soundFemaleLink%}<a href="{{entry.soundFemaleLink}}">F</a>{%endif%}</td>
        <td class="unicodeOsageText size18">{{entry.osagePhraseUnicode}}</td>
        <td>{{entry.englishPhrase}}</td>
        <td class="oldOsageText size18">{{entry.osagePhraseLatin}}</td>
        <td>{{entry.comment}}</td>
        <td>{{entry.status}}</td>
        <td>{{entry.dbName}}</td>

      </tr>
      {% endfor %}
    </table>
    </div>

  </div>  <!-- of container -->
  </body>
</html>
